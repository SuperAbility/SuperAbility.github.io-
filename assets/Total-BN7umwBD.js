import{c as D}from"./operation-D4-2jzsp.js";import{d as E,k as m,y as z,z as A,q as M,r as d,o as g,c as U,w as l,a as e,i as P,L as j,e as v,t as G,f as H,g as I,F as J,l as V}from"./index-BJISwmxh.js";const K={class:"card-header"},X=E({__name:"Total",setup(O){const b=m(),f=m("");z(f,r=>{b.value.filter(r)});const q={children:"children",label:"label"},k=m([]);A(async()=>{const{data:r}=await D();k.value=r});const C=(r,a)=>(console.log(r,a),r?a.label.includes(r):!0),_=m(""),y=m(),F=M({name:[{required:!0,message:"请输入模板名称",trigger:"blur"}],service:[{required:!0,message:"请输入服务费",trigger:"blur"}],parking:[{required:!0,message:"请输入停车费",trigger:"blur"}],remarks:[{required:!0,message:"请输入备注",trigger:"blur"}]}),o=m({name:"",service:"",parking:"",remarks:"",date:[{date1:"",date2:"",electricity:""}]}),N=()=>{o.value.date.push({date1:"",date2:"",electricity:""})},T=()=>{var r;(r=y.value)==null||r.validate(a=>{a&&console.log(o.value)})},B=r=>{r.children||(_.value=r.label,h())},h=()=>{o.value={name:"",service:"",parking:"",remarks:"",date:[{date1:"",date2:"",electricity:""}]}};return(r,a)=>{const c=d("el-button"),s=d("el-input"),w=d("el-card"),n=d("el-col"),u=d("el-form-item"),x=d("el-time-picker"),R=d("el-form"),L=d("el-row");return g(),U(L,{gutter:20},{default:l(()=>[e(n,{span:6},{default:l(()=>[e(w,null,{default:l(()=>[e(s,{style:{width:"80%"},placeholder:"请输入关键词",modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=t=>f.value=t)},{append:l(()=>[e(c,{icon:"Search"})]),_:1},8,["modelValue"]),e(P(j),{ref_key:"treeRef",ref:b,data:k.value,style:{"max-width":"600px"},props:q,class:"mt","show-checkbox":"","filter-node-method":C,onNodeClick:B},null,8,["data"])]),_:1})]),_:1}),e(n,{span:18},{default:l(()=>[e(w,null,{header:l(()=>[v("div",K,[v("h3",null,G(_.value)+":计费模板",1)])]),default:l(()=>[e(R,{ref_key:"ruleFormRef",ref:y,model:o.value,rules:F,"label-width":"auto"},{default:l(()=>[e(u,{label:"模板名称:",prop:"name"},{default:l(()=>[e(s,{modelValue:o.value.name,"onUpdate:modelValue":a[1]||(a[1]=t=>o.value.name=t),placeholder:"请输入模板名称",style:{"max-width":"200px"},disabled:!_.value},null,8,["modelValue","disabled"])]),_:1}),(g(!0),H(J,null,I(o.value.date,(t,i)=>(g(),U(u,{label:"时间区间"+(i+1)+":",key:i},{default:l(()=>[e(n,{span:8},{default:l(()=>[e(u,{label:"开始时间",prop:"date."+i+".date1",rules:{required:!0,message:"时间不能为空",trigger:"blur"}},{default:l(()=>[e(x,{"value-format":"hh:mm:ss",modelValue:t.date1,"onUpdate:modelValue":p=>t.date1=p,placeholder:"选择开始时间",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024),e(n,{span:1},{default:l(()=>a[5]||(a[5]=[v("span",{class:"ml"},"--",-1)])),_:1}),e(n,{span:8},{default:l(()=>[e(u,{prop:"date."+i+".date2",label:"结束时间",rules:{required:!0,message:"时间不能为空",trigger:"blur"}},{default:l(()=>[e(x,{"value-format":"hh:mm:ss",modelValue:t.date2,"onUpdate:modelValue":p=>t.date2=p,placeholder:"选择结束时间",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024),e(n,{span:6},{default:l(()=>[e(u,{label:"电费",prop:"date."+i+".electricity",rules:{required:!0,message:"电费不能为空",trigger:"blur"}},{default:l(()=>[e(s,{placeholder:"请输入电费",modelValue:t.electricity,"onUpdate:modelValue":p=>t.electricity=p,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024)]),_:2},1032,["label"]))),128)),e(c,{type:"primary",class:"mb",onClick:N},{default:l(()=>a[6]||(a[6]=[V("添加时间区间")])),_:1}),e(u,{label:"服务费：",prop:"service"},{default:l(()=>[e(s,{modelValue:o.value.service,"onUpdate:modelValue":a[2]||(a[2]=t=>o.value.service=t),style:{"max-width":"200px"}},null,8,["modelValue"])]),_:1}),e(u,{label:"停车费：",prop:"parking"},{default:l(()=>[e(s,{modelValue:o.value.parking,"onUpdate:modelValue":a[3]||(a[3]=t=>o.value.parking=t),style:{"max-width":"200px"}},null,8,["modelValue"])]),_:1}),e(u,{label:"特殊备注：",prop:"remarks"},{default:l(()=>[e(s,{modelValue:o.value.remarks,"onUpdate:modelValue":a[4]||(a[4]=t=>o.value.remarks=t),type:"textarea"},null,8,["modelValue"])]),_:1}),e(u,null,{default:l(()=>[e(c,{type:"primary",onClick:T},{default:l(()=>a[7]||(a[7]=[V("创建")])),_:1}),e(c,{onClick:h},{default:l(()=>a[8]||(a[8]=[V("重置")])),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1})}}});export{X as default};
