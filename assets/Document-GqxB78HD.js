import{y as j,d as T,M as G,k as O,N as x,z as K,B as q,O as Q,P as W,Q as R,p as J,r as A,A as X,o as p,f as L,a as E,w as g,i as Y,h as Z,c as V,F as B,e as _,l as b,g as I,t as M,_ as ee}from"./index-BJISwmxh.js";var ne=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],te=function(e){return ne.map(function(o){return o.toLowerCase()}).indexOf(e.toLowerCase())!==-1},oe=function(e,o,t){Object.keys(o).filter(te).forEach(function(r){var a=o[r];typeof a=="function"&&(r==="onInit"?a(e,t):t.on(r.substring(2),function(u){return a(u,t)}))})},ae=function(e,o,t,r){var a=e.modelEvents?e.modelEvents:null,u=Array.isArray(a)?a.join(" "):a;j(r,function(f,c){t&&typeof f=="string"&&f!==c&&f!==t.getContent({format:e.outputFormat})&&t.setContent(f)}),t.on(u||"change input undo redo",function(){o.emit("update:modelValue",t.getContent({format:e.outputFormat}))})},re=function(e,o,t,r,a,u){r.setContent(u()),t.attrs["onUpdate:modelValue"]&&ae(o,t,r,a),oe(e,t.attrs,r)},N=0,$=function(e){var o=Date.now(),t=Math.floor(Math.random()*1e9);return N++,e+"_"+t+N+String(o)},ie=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},z=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},le=function(e,o){return z(e).concat(z(o))},ue=function(e){return e==null},F=function(){return{listeners:[],scriptId:$("tiny-script"),scriptLoaded:!1}},se=function(){var e=F(),o=function(a,u,f,c){var l=u.createElement("script");l.referrerPolicy="origin",l.type="application/javascript",l.id=a,l.src=f;var s=function(){l.removeEventListener("load",s),c()};l.addEventListener("load",s),u.head&&u.head.appendChild(l)},t=function(a,u,f){e.scriptLoaded?f():(e.listeners.push(f),a.getElementById(e.scriptId)||o(e.scriptId,a,u,function(){e.listeners.forEach(function(c){return c()}),e.scriptLoaded=!0}))},r=function(){e=F()};return{load:t,reinitialize:r}},de=se(),ce=function(){return typeof window<"u"?window:global},w=function(){var e=ce();return e&&e.tinymce?e.tinymce:null},ve={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},C=function(){return C=Object.assign||function(e){for(var o,t=1,r=arguments.length;t<r;t++){o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},C.apply(this,arguments)},fe=function(e,o,t,r){return e(r||"div",{id:o,ref:t})},me=function(e,o,t){return e("textarea",{id:o,visibility:"hidden",ref:t})},P={selector:void 0,target:void 0},ye=T({props:ve,setup:function(e,o){var t=e.init?C(C({},e.init),P):C({},P),r=G(e),a=r.disabled,u=r.modelValue,f=r.tagName,c=O(null),l=null,s=e.id||$("tiny-vue"),n=e.init&&e.init.inline||e.inline,v=!!o.attrs["onUpdate:modelValue"],S=!0,k=e.initialValue?e.initialValue:"",h="",U=function(d){return v?function(){return u!=null&&u.value?u.value:""}:function(){return d?k:h}},i=function(){var d=U(S),m=C(C({},t),{readonly:e.disabled,target:c.value,plugins:le(t.plugins,e.plugins),toolbar:e.toolbar||t.toolbar,inline:n,setup:function(D){l=D,D.on("init",function(H){return re(H,e,o,D,u,d)}),typeof t.setup=="function"&&t.setup(D)}});ie(c.value)&&(c.value.style.visibility=""),w().init(m),S=!1};j(a,function(d){var m;l!==null&&(typeof((m=l.mode)===null||m===void 0?void 0:m.set)=="function"?l.mode.set(d?"readonly":"design"):l.setMode(d?"readonly":"design"))}),j(f,function(d){var m;v||(h=l.getContent()),(m=w())===null||m===void 0||m.remove(l),x(function(){return i()})}),K(function(){if(w()!==null)i();else if(c.value&&c.value.ownerDocument){var d=e.cloudChannel?e.cloudChannel:"6",m=e.apiKey?e.apiKey:"no-api-key",D=ue(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(m,"/tinymce/").concat(d,"/tinymce.min.js"):e.tinymceScriptSrc;de.load(c.value.ownerDocument,D,i)}}),q(function(){w()!==null&&w().remove(l)}),n||(Q(function(){S||i()}),W(function(){var d;v||(h=l.getContent()),(d=w())===null||d===void 0||d.remove(l)}));var y=function(d){var m;h=l.getContent(),(m=w())===null||m===void 0||m.remove(l),t=C(C(C({},t),d),P),x(function(){return i()})};return o.expose({rerender:y,getEditor:function(){return l}}),function(){return n?fe(R,s,c,e.tagName):me(R,s,c)}}});function pe(){return J("/document")}const ge={class:"mt"},Ce={class:"mt"},be={class:"mt"},Se={class:"mt"},_e=T({__name:"Document",setup(e){const o=O({type:[],important:[],publish:[]});K(async()=>{const{data:s}=await pe();o.value=s});const t=O([-1,-1,-1]),r=(s,n,v)=>{console.log(s,n,v);const S=a.value.findIndex(k=>k.num===n);v?S==-1?a.value.push({name:v,num:n}):a.value[S]={name:v,num:n}:a.value=a.value.filter(k=>k.num!=n),t.value[n]=s},a=O([]),u=s=>{a.value=a.value.filter(n=>n.num!=s),t.value[s]=-1},f=O(""),c=()=>{const s=new Blob([f.value],{type:"text/html"}),n=document.createElement("a");n.href=URL.createObjectURL(s),n.download="documnet.html",n.click(),URL.revokeObjectURL(n.href)},l=()=>{console.log(a.value.map(s=>s.name))};return(s,n)=>{const v=A("el-tag"),S=A("el-divider"),k=A("el-card"),h=A("el-button"),U=X("permission");return p(),L(B,null,[E(k,null,{default:g(()=>[_("div",ge,[n[5]||(n[5]=_("span",{class:"title"},"文章类型：",-1)),E(v,{type:t.value[0]==-1?"primary":"info",class:"mr",onClick:n[0]||(n[0]=i=>r(-1,0,""))},{default:g(()=>n[4]||(n[4]=[b("全部")])),_:1},8,["type"]),(p(!0),L(B,null,I(o.value.type,(i,y)=>(p(),V(v,{type:t.value[0]==y?"primary":"info",class:"mr",key:i,onClick:d=>r(y,0,i)},{default:g(()=>[b(M(i),1)]),_:2},1032,["type","onClick"]))),128))]),_("div",Ce,[n[7]||(n[7]=_("span",{class:"title"},"重要程度：",-1)),E(v,{type:t.value[1]==-1?"primary":"info",class:"mr",onClick:n[1]||(n[1]=i=>r(-1,1,""))},{default:g(()=>n[6]||(n[6]=[b("全部")])),_:1},8,["type"]),(p(!0),L(B,null,I(o.value.important,(i,y)=>(p(),V(v,{type:t.value[1]==y?"primary":"info",class:"mr",key:i,onClick:d=>r(y,1,i)},{default:g(()=>[b(M(i),1)]),_:2},1032,["type","onClick"]))),128))]),_("div",be,[n[9]||(n[9]=_("span",{class:"title"},"发布渠道：",-1)),E(v,{type:t.value[2]==-1?"primary":"info",class:"mr",onClick:n[2]||(n[2]=i=>r(-1,2,""))},{default:g(()=>n[8]||(n[8]=[b("全部")])),_:1},8,["type"]),(p(!0),L(B,null,I(o.value.publish,(i,y)=>(p(),V(v,{type:t.value[2]==y?"primary":"info",class:"mr",key:i,onClick:d=>r(y,2,i)},{default:g(()=>[b(M(i),1)]),_:2},1032,["type","onClick"]))),128))]),E(S),_("div",Se,[n[10]||(n[10]=_("span",{class:"title"},"已选:",-1)),(p(!0),L(B,null,I(a.value,i=>(p(),V(v,{"disable-transitions":"",type:"success",class:"mr",closable:"",key:i,onClose:y=>u(i.num)},{default:g(()=>[b(M(i.name),1)]),_:2},1032,["onClose"]))),128))])]),_:1}),E(h,{type:"primary",class:"mt mb",onClick:c},{default:g(()=>n[11]||(n[11]=[b("导出富文本到HTML文件")])),_:1}),E(Y(ye),{modelValue:f.value,"onUpdate:modelValue":n[3]||(n[3]=i=>f.value=i),"api-key":"xvbamfm2vokka8qoim9r801qtdlldskjschd51yha7zhuusp",init:{language:"zh_CN",plugins:"lists link image table code help wordcount"}},null,8,["modelValue"]),Z((p(),V(h,{type:"primary",onClick:l,class:"mt"},{default:g(()=>n[12]||(n[12]=[b("提交文章内容")])),_:1})),[[U,"user"]])],64)}}}),he=ee(_e,[["__scopeId","data-v-ab665aa1"]]);export{he as default};
