import{p as Q,d as W,k as p,z as X,r as u,o as d,f as v,a as e,w as o,F as I,g as E,c as g,i as Y,l as m,t as c,E as Z}from"./index-5kr0lnXv.js";import{_ as h}from"./StepForm.vue_vue_type_script_setup_true_lang-MKDMXZxU.js";function ee(){return Q("/alarmList")}const le={description:"故障描述",address:"设备地址",equNo:"设备号",level:"告警级别",time:"故障时间",code:"故障代码",status:"当前状态"},oe=V=>le[V]||V,ae={key:2},ne=W({__name:"Alarm",setup(V){const w=p(1),U=p([]);X(async()=>{const{data:L}=await ee();U.value=L});const f=p(!1),M=[{title:"基本信息"},{title:"审批信息"},{title:"负责人信息"}],t=p({basicInfo:{name:"",email:"",tel:"",no:"",urgent:!0,other:[],remarks:""},shenpi:{a:"",b:""},info:{person:"",tel:""}}),R={name:[{required:!0,message:"请输入姓名",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],tel:[{required:!0,message:"请输入电话",trigger:"blur"}],no:[{required:!0,message:"请输入工号",trigger:"blur"}]},S={a:[{required:!0,message:"不能为空",trigger:"blur"}],b:[{required:!0,message:"不能为空",trigger:"blur"}]},z={person:[{required:!0,message:"不能为空",trigger:"blur"}],tel:[{required:!0,message:"不能为空",trigger:"blur"}]},x=p(),q=p(),C=p(),A=()=>{console.log(t.value),Z({message:"指派成功",type:"success"}),f.value=!1};return(L,l)=>{const b=u("el-radio-button"),F=u("el-radio-group"),N=u("el-card"),H=u("el-alert"),T=u("el-tag"),j=u("el-text"),$=u("el-descriptions-item"),B=u("el-button"),G=u("el-descriptions"),i=u("el-input"),n=u("el-form-item"),J=u("el-switch"),_=u("el-checkbox"),K=u("el-checkbox-group"),k=u("el-form"),r=u("el-option"),D=u("el-select"),O=u("el-result"),P=u("el-drawer");return d(),v(I,null,[e(N,null,{default:o(()=>[e(F,{modelValue:w.value,"onUpdate:modelValue":l[0]||(l[0]=a=>w.value=a),size:"large",class:"mt"},{default:o(()=>[e(b,{label:"严重告警",value:1}),e(b,{label:"紧急告警",value:2}),e(b,{label:"重要告警",value:3}),e(b,{label:"一般告警",value:4})]),_:1},8,["modelValue"])]),_:1}),(d(!0),v(I,null,E(U.value,a=>(d(),g(N,{class:"mt",key:a.equNo},{default:o(()=>[e(H,{title:`${a.address}充电桩充电异常`,type:"warning","show-icon":""},null,8,["title"]),e(G,{border:!0,column:4,direction:"vertical",class:"mt"},{default:o(()=>[(d(!0),v(I,null,E(a,(s,y)=>(d(),g($,{label:Y(oe)(y)},{default:o(()=>[y=="level"?(d(),g(T,{key:0,type:s==1?"danger":s==2?"warning":"info"},{default:o(()=>[m(c(s==1?"严重":s==2?"紧急":"一般"),1)]),_:2},1032,["type"])):y=="status"?(d(),g(j,{key:1,type:"danger"},{default:o(()=>[m(c(s==1?"待指派":s==2?"处理中":"处理异常"),1)]),_:2},1024)):(d(),v("span",ae,c(s),1))]),_:2},1032,["label"]))),256)),e($,{label:"操作"},{default:o(()=>[e(B,{onClick:l[1]||(l[1]=s=>f.value=!0),type:a.status==2?"warning":"primary"},{default:o(()=>[m(c(a.status==1?"指派":a.status==2?"催办":"查看"),1)]),_:2},1032,["type"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(P,{modelValue:f.value,"onUpdate:modelValue":l[14]||(l[14]=a=>f.value=a),title:"报警任务指派"},{default:o(()=>[e(h,{steps:M,form1:x.value,form2:q.value,form3:C.value,onHandleSubmit:A},{"step-1":o(()=>[e(k,{model:t.value.basicInfo,rules:R,ref_key:"form1",ref:x},{default:o(()=>[e(n,{label:"姓名：",prop:"name"},{default:o(()=>[e(i,{modelValue:t.value.basicInfo.name,"onUpdate:modelValue":l[2]||(l[2]=a=>t.value.basicInfo.name=a)},null,8,["modelValue"])]),_:1}),e(n,{label:"邮箱：",prop:"email"},{default:o(()=>[e(i,{modelValue:t.value.basicInfo.email,"onUpdate:modelValue":l[3]||(l[3]=a=>t.value.basicInfo.email=a)},null,8,["modelValue"])]),_:1}),e(n,{label:"电话：",prop:"tel"},{default:o(()=>[e(i,{modelValue:t.value.basicInfo.tel,"onUpdate:modelValue":l[4]||(l[4]=a=>t.value.basicInfo.tel=a)},null,8,["modelValue"])]),_:1}),e(n,{label:"工号：",prop:"no"},{default:o(()=>[e(i,{modelValue:t.value.basicInfo.no,"onUpdate:modelValue":l[5]||(l[5]=a=>t.value.basicInfo.no=a)},null,8,["modelValue"])]),_:1}),e(n,{label:"是否加急："},{default:o(()=>[e(J,{modelValue:t.value.basicInfo.urgent,"onUpdate:modelValue":l[6]||(l[6]=a=>t.value.basicInfo.urgent=a)},null,8,["modelValue"])]),_:1}),e(n,{label:"其他选项："},{default:o(()=>[e(K,{modelValue:t.value.basicInfo.other,"onUpdate:modelValue":l[7]||(l[7]=a=>t.value.basicInfo.other=a)},{default:o(()=>[e(_,{value:"1"},{default:o(()=>l[15]||(l[15]=[m("更换设备")])),_:1}),e(_,{value:"2"},{default:o(()=>l[16]||(l[16]=[m("仅维修")])),_:1}),e(_,{value:"3"},{default:o(()=>l[17]||(l[17]=[m("需拍照片")])),_:1}),e(_,{value:"4"},{default:o(()=>l[18]||(l[18]=[m("需报备")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"其他备注信息："},{default:o(()=>[e(i,{modelValue:t.value.basicInfo.remarks,"onUpdate:modelValue":l[8]||(l[8]=a=>t.value.basicInfo.remarks=a),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),"step-2":o(()=>[e(k,{model:t.value.shenpi,ref_key:"form2",ref:q,rules:S},{default:o(()=>[e(n,{label:"审批部门",prop:"a"},{default:o(()=>[e(D,{placeholder:"请选择审批部门",modelValue:t.value.shenpi.a,"onUpdate:modelValue":l[9]||(l[9]=a=>t.value.shenpi.a=a)},{default:o(()=>[e(r,{label:"总裁办",value:"1"}),e(r,{label:"运营部",value:"2"}),e(r,{label:"维修部",value:"3"}),e(r,{label:"市场部",value:"4"}),e(r,{label:"财务部",value:"5"})]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"抄送部门",prop:"b"},{default:o(()=>[e(D,{placeholder:"请选择抄送部门",modelValue:t.value.shenpi.b,"onUpdate:modelValue":l[10]||(l[10]=a=>t.value.shenpi.b=a)},{default:o(()=>[e(r,{label:"总裁办",value:"1"}),e(r,{label:"运营部",value:"2"}),e(r,{label:"维修部",value:"3"}),e(r,{label:"市场部",value:"4"}),e(r,{label:"财务部",value:"5"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),"step-3":o(()=>[e(k,{model:t.value.info,rules:z,ref_key:"form3",ref:C},{default:o(()=>[e(n,{label:"负责人姓名：",prop:"person"},{default:o(()=>[e(i,{modelValue:t.value.info.person,"onUpdate:modelValue":l[11]||(l[11]=a=>t.value.info.person=a)},null,8,["modelValue"])]),_:1}),e(n,{label:"负责人电话：",prop:"tel"},{default:o(()=>[e(i,{modelValue:t.value.info.tel,"onUpdate:modelValue":l[12]||(l[12]=a=>t.value.info.tel=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["form1","form2","form3"]),e(O,{icon:"warning",title:"设备编号：CD1001","sub-title":"该任务已催促2次，请抓紧处理"},{extra:o(()=>[e(B,{type:"primary",onClick:l[13]||(l[13]=a=>f.value=!1)},{default:o(()=>l[19]||(l[19]=[m("我已知晓")])),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{ne as default};
