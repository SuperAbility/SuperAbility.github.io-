import{e as O,l as Q,d as W}from"./chargingstation-Dny_sFYv.js";import{x as X,k as b,d as P,q as E,s as Y,y as Z,r as u,o as k,c as S,w as l,e as h,a as e,l as v,E as T,z as ee,A as le,f as te,F as ae,h as oe,n as M}from"./index-5kr0lnXv.js";const j=X("station",()=>{const z=b({name:"",id:"",city:"",fast:"",slow:"",status:1,now:"",fault:"",person:"",tel:""});return{rowData:z,setRowData:i=>{z.value=i}}}),ne={class:"dialog-footer"},ue=P({__name:"StationForm",props:{dialogVisible:{type:Boolean,required:!0}},emits:["close","reload"],setup(z,{emit:w}){const i=z,D=w,o=b({name:"",id:"",city:"",fast:"",slow:"",status:1,now:"",fault:"",person:"",tel:""}),f=E({name:[{required:!0,message:"站点名称不能为空",trigger:"blur"}],id:[{required:!0,message:"站点id不能为空",trigger:"blur"}],city:[{required:!0,message:"所属城市不能为空",trigger:"blur"}],person:[{required:!0,message:"站点负责人不能为空",trigger:"blur"}],tel:[{required:!0,message:"负责人电话不能为空",trigger:"blur"}],fast:[{required:!0,message:"快充数不能为空",trigger:"blur"}],slow:[{required:!0,message:"慢充数不能为空",trigger:"blur"}],status:[{required:!0,message:"充电站状态不能为空",trigger:"blur"}],now:[{required:!0,message:"正在充电数不能为空",trigger:"blur"}],fault:[{required:!0,message:"故障数量不能为空",trigger:"blur"}]}),q=j(),{rowData:_}=Y(q),x=b("");Z(()=>i.dialogVisible,()=>{_.value.name?(x.value="编辑充电站信息",V.value=!0):(x.value="新增充电站信息",V.value=!1),o.value=_.value});const V=b(!1),R=()=>{D("close")},y=b(),N=()=>{var U;(U=y.value)==null||U.validate(async a=>{if(a){const r=await O(o.value);r.code==200&&(T({message:r.data,type:"success"}),R(),D("reload"))}})};return(U,a)=>{const r=u("el-input"),p=u("el-form-item"),d=u("el-col"),t=u("el-option"),c=u("el-select"),A=u("el-row"),$=u("el-form"),g=u("el-button"),C=u("el-dialog");return k(),S(C,{"model-value":z.dialogVisible,title:x.value,onClose:R,"destroy-on-close":""},{footer:l(()=>[h("div",ne,[e(g,{onClick:R},{default:l(()=>a[10]||(a[10]=[v("取消")])),_:1}),e(g,{type:"primary",onClick:N},{default:l(()=>a[11]||(a[11]=[v(" 确认 ")])),_:1})])]),default:l(()=>[e($,{"label-width":"120",rules:f,model:o.value,ref_key:"formRef",ref:y},{default:l(()=>[e(A,null,{default:l(()=>[e(d,{span:12},{default:l(()=>[e(p,{label:"站点名称:",prop:"name"},{default:l(()=>[e(r,{modelValue:o.value.name,"onUpdate:modelValue":a[0]||(a[0]=n=>o.value.name=n)},null,8,["modelValue"])]),_:1}),e(p,{label:"站点id:",prop:"id"},{default:l(()=>[e(r,{modelValue:o.value.id,"onUpdate:modelValue":a[1]||(a[1]=n=>o.value.id=n),disabled:V.value},null,8,["modelValue","disabled"])]),_:1}),e(p,{label:"所属城市：",prop:"city"},{default:l(()=>[e(r,{modelValue:o.value.city,"onUpdate:modelValue":a[2]||(a[2]=n=>o.value.city=n)},null,8,["modelValue"])]),_:1}),e(p,{label:"站点负责人：",prop:"person"},{default:l(()=>[e(r,{modelValue:o.value.person,"onUpdate:modelValue":a[3]||(a[3]=n=>o.value.person=n)},null,8,["modelValue"])]),_:1}),e(p,{label:"负责人电话：",prop:"tel"},{default:l(()=>[e(r,{modelValue:o.value.tel,"onUpdate:modelValue":a[4]||(a[4]=n=>o.value.tel=n)},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:12},{default:l(()=>[e(p,{label:"快充数：",prop:"fast"},{default:l(()=>[e(r,{modelValue:o.value.fast,"onUpdate:modelValue":a[5]||(a[5]=n=>o.value.fast=n)},null,8,["modelValue"])]),_:1}),e(p,{label:"慢充数：",prop:"slow"},{default:l(()=>[e(r,{modelValue:o.value.slow,"onUpdate:modelValue":a[6]||(a[6]=n=>o.value.slow=n)},null,8,["modelValue"])]),_:1}),e(p,{label:"充电站状态：",prop:"status"},{default:l(()=>[e(c,{placeholder:"充电站状态",modelValue:o.value.status,"onUpdate:modelValue":a[7]||(a[7]=n=>o.value.status=n),disabled:V.value},{default:l(()=>[e(t,{label:"全部",value:1}),e(t,{label:"使用中",value:2}),e(t,{label:"空闲中",value:3}),e(t,{label:"维护中",value:4}),e(t,{label:"待维修",value:5})]),_:1},8,["modelValue","disabled"])]),_:1}),e(p,{label:"正在充电：",prop:"now"},{default:l(()=>[e(r,{modelValue:o.value.now,"onUpdate:modelValue":a[8]||(a[8]=n=>o.value.now=n),disabled:V.value},null,8,["modelValue","disabled"])]),_:1}),e(p,{label:"故障数：",prop:"fault"},{default:l(()=>[e(r,{modelValue:o.value.fault,"onUpdate:modelValue":a[9]||(a[9]=n=>o.value.fault=n),disabled:V.value},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["model-value","title"])}}}),de=P({__name:"Monitor",setup(z){const w=b("name"),i=E({input:"",value:1}),D=b([]),o=b(0),f=E({page:1,pageSize:10}),q=b(!1),_=async()=>{q.value=!0;const{data:{list:d,total:t}}=await Q({...f,status:i.value,[w.value]:i.input});q.value=!1,D.value=d,o.value=t};ee(()=>{_()});const x=d=>{f.pageSize=d,_()},V=d=>{f.page=d,_()},R=()=>{f.page=1,f.pageSize=10,i.input="",i.value=1,w.value="name",_()},y=b(!1),N=j(),{setRowData:U}=N,a=d=>{U(d),y.value=!0},r=()=>{U({name:"",id:"",city:"",fast:"",slow:"",status:1,now:"",fault:"",person:"",tel:""}),y.value=!0},p=async d=>{const t=await W(d);t.code==200&&T({message:t.data,type:"success"}),_()};return(d,t)=>{const c=u("el-option"),A=u("el-select"),$=u("el-input"),g=u("el-col"),C=u("el-button"),n=u("el-row"),B=u("el-card"),F=u("el-statistic"),m=u("el-table-column"),I=u("el-tag"),G=u("el-popconfirm"),H=u("el-table"),J=u("el-pagination"),K=le("loading");return k(),te(ae,null,[e(B,null,{default:l(()=>[e(n,{gutter:20},{default:l(()=>[e(g,{span:6},{default:l(()=>[e($,{modelValue:i.input,"onUpdate:modelValue":t[1]||(t[1]=s=>i.input=s),modelModifiers:{trim:!0},placeholder:"请输入站点名称、ID"},{append:l(()=>[e(A,{modelValue:w.value,"onUpdate:modelValue":t[0]||(t[0]=s=>w.value=s),style:{width:"115px"}},{default:l(()=>[e(c,{label:"按名称查询",value:"name"}),e(c,{label:"按ID查询",value:"id"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(g,{span:6},{default:l(()=>[e(A,{placeholder:"充电站状态",modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=s=>i.value=s)},{default:l(()=>[e(c,{label:"全部",value:1}),e(c,{label:"使用中",value:2}),e(c,{label:"空闲中",value:3}),e(c,{label:"维护中",value:4}),e(c,{label:"待维修",value:5})]),_:1},8,["modelValue"])]),_:1}),e(g,{span:6},{default:l(()=>[e(C,{type:"primary",onClick:_},{default:l(()=>t[6]||(t[6]=[v("查询")])),_:1}),e(C,{onClick:R},{default:l(()=>t[7]||(t[7]=[v("重置")])),_:1})]),_:1})]),_:1})]),_:1}),e(B,{class:"mt"},{default:l(()=>[e(n,null,{default:l(()=>[e(g,{span:6},{default:l(()=>[e(F,{title:"累计充电量(度)",value:268900})]),_:1}),e(g,{span:6},{default:l(()=>[e(F,{title:"累计充电次数(次)",value:1389})]),_:1}),e(g,{span:6},{default:l(()=>[e(F,{title:"服务区域(个)",value:88})]),_:1}),e(g,{span:6},{default:l(()=>[e(F,{title:"累计效益(元)",value:5622178})]),_:1})]),_:1})]),_:1}),e(B,{class:"mt"},{default:l(()=>[e(C,{type:"primary",icon:"Plus",onClick:r},{default:l(()=>t[8]||(t[8]=[v("新增充电站")])),_:1})]),_:1}),e(B,{class:"mt"},{default:l(()=>[oe((k(),S(H,{data:D.value,style:{width:"100%"}},{default:l(()=>[e(m,{type:"index",width:"80",label:"序号"}),e(m,{prop:"name",label:"站点名称"}),e(m,{prop:"id",label:"站点ID"}),e(m,{prop:"city",label:"所属城市"}),e(m,{prop:"fast",label:"快充数"}),e(m,{prop:"slow",label:"慢充数"}),e(m,{prop:"status",label:"充电站状态"},{default:l(s=>[s.row.status==2?(k(),S(I,{key:0,type:"primary"},{default:l(()=>t[9]||(t[9]=[v("使用中")])),_:1})):M("",!0),s.row.status==3?(k(),S(I,{key:1,type:"success"},{default:l(()=>t[10]||(t[10]=[v("空闲中")])),_:1})):M("",!0),s.row.status==4?(k(),S(I,{key:2,type:"warning"},{default:l(()=>t[11]||(t[11]=[v("维护中")])),_:1})):M("",!0),s.row.status==5?(k(),S(I,{key:3,type:"danger"},{default:l(()=>t[12]||(t[12]=[v("待维修")])),_:1})):M("",!0)]),_:1}),e(m,{prop:"now",label:"正在充电"}),e(m,{prop:"fault",label:"故障数"}),e(m,{prop:"person",label:"站点负责人"}),e(m,{prop:"tel",label:"负责人电话"}),e(m,{label:"操作"},{default:l(s=>[e(C,{type:"primary",size:"small",onClick:L=>a(s.row)},{default:l(()=>t[13]||(t[13]=[v("编辑")])),_:2},1032,["onClick"]),e(G,{title:"确定要删除当前站点吗？",onConfirm:L=>p(s.row.id)},{reference:l(()=>[e(C,{type:"danger",size:"small"},{default:l(()=>t[14]||(t[14]=[v("删除")])),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[K,q.value]]),e(J,{class:"fr mt mb","current-page":f.page,"onUpdate:currentPage":t[3]||(t[3]=s=>f.page=s),"page-size":f.pageSize,"onUpdate:pageSize":t[4]||(t[4]=s=>f.pageSize=s),"page-sizes":[10,20,30,40],layout:"sizes, prev, pager, next, jumper,total",total:o.value,onSizeChange:x,onCurrentChange:V,background:""},null,8,["current-page","page-size","total"])]),_:1}),e(ue,{"dialog-visible":y.value,onClose:t[5]||(t[5]=s=>y.value=!1),onReload:_},null,8,["dialog-visible"])],64)}}});export{de as default};
